var el;
window.onload = function () {
	
	// Register the font:
	Cufon.registerFont(Raphael.registerFont({"w":200,"face":{"font-family":"HelveticaNeue","font-weight":400,"font-stretch":"normal","units-per-em":"360","panose-1":"2 0 5 3 0 0 0 2 0 4","ascent":"288","descent":"-72","x-height":"4","bbox":"-8 -287 329 77","underline-thickness":"18","underline-position":"-27","unicode-range":"U+0020-U+007E"},"glyphs":{" ":{"w":100},"!":{"d":"27,-40r0,40r40,0r0,-40r-40,0xm64,-178r0,-79r-34,0v-2,68,4,130,9,191r16,0","w":93},"\"":{"d":"90,-257r0,93r24,0r0,-93r-24,0xm39,-257r0,93r25,0r0,-93r-25,0","w":153},"#":{"d":"83,-153r45,0r-8,54r-44,0xm47,-74r-10,74r25,0r10,-74r45,0r-11,74r25,0r10,-74r37,0r0,-25r-33,0r8,-54r35,0r0,-24r-32,0r10,-74r-25,0r-10,74r-45,0r11,-74r-25,0r-10,74r-40,0r0,24r36,0r-7,54r-39,0r0,25r35,0"},"$":{"d":"90,-23v-28,-4,-50,-23,-50,-55r-31,0v4,50,33,79,81,84r0,29r20,0r0,-29v78,6,107,-109,39,-139v-13,-6,-25,-8,-39,-12r0,-88v22,4,35,17,40,41r31,0v-8,-40,-31,-66,-71,-71r0,-24r-20,0r0,24v-42,5,-72,28,-73,75v0,49,33,60,73,70r0,95xm110,-113v47,0,65,69,19,87v-6,2,-12,3,-19,3r0,-90xm90,-150v-34,-2,-55,-46,-29,-72v8,-7,17,-11,29,-12r0,84"},"%":{"d":"90,-131v-44,-2,-41,-103,1,-104v45,0,43,104,-1,104xm91,-255v-42,0,-58,31,-58,73v0,42,15,71,58,71v42,-1,58,-31,58,-72v0,-43,-15,-72,-58,-72xm268,-15v-43,-3,-42,-103,1,-105v46,1,42,105,-1,105xm269,-140v-42,0,-57,31,-58,73v0,42,16,71,58,71v42,0,58,-31,58,-72v0,-43,-15,-72,-58,-72xm261,-260r-193,268r31,0r193,-268r-31,0","w":360},"&":{"d":"104,-230v39,-1,32,53,7,64v-7,3,-7,4,-12,8v-9,-14,-24,-23,-25,-45v0,-17,15,-26,30,-27xm12,-66v-5,80,122,90,153,34r27,32r40,0r-50,-58v10,-19,15,-35,17,-63r-29,0v-1,13,-3,27,-8,40r-46,-57v23,-15,48,-31,48,-66v0,-36,-26,-53,-62,-53v-35,0,-58,18,-58,53v-1,30,17,42,28,60v-29,17,-57,34,-60,78xm148,-53v-16,38,-104,43,-104,-13v0,-33,23,-46,45,-58","w":226},"'":{"d":"38,-257r0,93r24,0r0,-93r-24,0","w":100},"(":{"d":"17,-97v0,73,27,121,56,168r24,0v-62,-85,-63,-250,0,-334r-24,0v-33,42,-56,99,-56,166","w":93},")":{"d":"-3,-263v61,86,62,248,0,334r23,0v33,-42,56,-99,56,-166v0,-73,-27,-121,-56,-168r-23,0","w":93},"*":{"d":"72,-216r0,-41r-19,0r0,41r-38,-15r-6,18r38,13r-24,33r17,11r23,-34r25,34r15,-11r-24,-33r39,-13r-7,-18","w":126},"+":{"d":"120,-103r0,-79r-24,0r0,79r-79,0r0,24r79,0r0,79r24,0r0,-79r79,0r0,-24r-79,0","w":216},",":{"d":"30,53v37,-9,43,-46,40,-93r-40,0r0,40r21,0v2,17,-9,29,-21,35r0,18","w":100},"-":{"d":"18,-114r0,28r104,0r0,-28r-104,0","w":140},".":{"d":"30,-40r0,40r40,0r0,-40r-40,0","w":100},"\/":{"d":"100,-263r-106,269r26,0r106,-269r-26,0","w":119},"0":{"d":"100,-23v-57,0,-53,-66,-52,-123v1,-42,9,-82,52,-82v50,0,53,52,53,102v0,49,-3,103,-53,103xm100,-255v-81,-1,-88,78,-84,159v2,58,23,100,84,100v81,1,89,-77,84,-158v-2,-58,-23,-101,-84,-101"},"1":{"d":"105,-255v-7,35,-33,48,-74,48r0,24r67,0r0,183r30,0r0,-255r-23,0"},"2":{"d":"139,-110v62,-36,45,-151,-41,-145v-54,4,-84,34,-82,90r30,0v2,-34,14,-61,50,-63v49,-3,62,59,33,88v-42,42,-118,56,-120,140r166,0r0,-27r-131,0v11,-47,64,-55,95,-83"},"3":{"d":"140,-187v0,33,-31,46,-62,41r0,26v41,-5,73,9,73,48v0,33,-23,48,-55,49v-36,0,-54,-22,-55,-56r-30,0v0,55,30,83,85,83v52,0,87,-25,88,-77v0,-33,-19,-55,-46,-63v18,-9,35,-26,35,-51v0,-85,-136,-89,-151,-19v-3,10,-6,21,-6,33r31,0v1,-32,15,-55,48,-55v26,0,45,14,45,41"},"4":{"d":"122,-87r-86,0r86,-125r0,125xm151,-87r0,-168r-25,0r-116,166r0,29r112,0r0,60r29,0r0,-60r34,0r0,-27r-34,0"},"5":{"d":"183,-81v5,-74,-78,-111,-130,-69r13,-74r103,0r0,-27r-126,0r-24,133r27,1v26,-40,109,-26,105,34v-3,36,-18,60,-54,60v-32,0,-50,-18,-54,-46r-30,0v1,49,34,73,81,73v55,0,85,-31,89,-85"},"6":{"d":"106,-228v25,0,41,15,43,38r31,0v-4,-41,-29,-65,-72,-65v-75,1,-93,62,-94,137v0,67,19,122,88,122v54,0,85,-33,85,-85v0,-49,-27,-82,-78,-83v-32,0,-51,13,-65,33v2,-48,11,-96,62,-97xm50,-80v0,-35,18,-57,53,-57v35,0,51,23,51,58v0,33,-17,56,-51,56v-35,0,-53,-23,-53,-57"},"7":{"d":"85,0v8,-95,49,-171,98,-225r0,-26r-165,0r0,29r134,0v-51,54,-92,126,-101,222r34,0"},"8":{"d":"101,-148v-27,-1,-45,-13,-45,-41v0,-26,18,-39,44,-39v24,0,43,14,43,39v0,25,-18,41,-42,41xm98,-255v-74,0,-101,95,-39,118v-26,9,-45,31,-45,64v1,52,35,77,87,77v51,0,85,-27,85,-77v0,-35,-17,-56,-46,-64v20,-10,36,-27,36,-53v0,-43,-30,-65,-78,-65xm101,-23v-31,1,-54,-19,-54,-49v1,-32,22,-49,54,-49v30,0,52,18,52,49v0,31,-20,49,-52,49"},"9":{"d":"95,-23v-25,1,-46,-16,-47,-39r-30,0v3,42,33,66,77,66v70,-2,89,-60,89,-137v0,-72,-20,-122,-88,-122v-52,0,-84,31,-84,83v0,53,28,84,81,85v27,0,49,-15,59,-35v1,52,-11,97,-57,99xm95,-228v36,0,52,23,52,58v0,34,-18,56,-52,56v-31,0,-49,-22,-50,-54v0,-36,14,-60,50,-60"},":":{"d":"70,-146r0,-40r-40,0r0,40r40,0xm30,-40r0,40r40,0r0,-40r-40,0","w":100},";":{"d":"70,-146r0,-40r-40,0r0,40r40,0xm30,53v38,-8,43,-46,40,-93r-40,0r0,40r21,0v2,17,-9,29,-21,35r0,18","w":100},"<":{"d":"199,-161r0,-24r-182,83r0,22r182,83r0,-25r-153,-69","w":216},"=":{"d":"17,-67r0,25r182,0r0,-25r-182,0xm199,-115r0,-25r-182,0r0,25r182,0","w":216},">":{"d":"17,-22r0,25r182,-83r0,-22r-182,-83r0,24r153,70","w":216},"?":{"d":"78,-40r0,40r40,0r0,-40r-40,0xm145,-130v53,-39,32,-140,-45,-133v-51,4,-79,34,-80,86r30,0v-11,-65,94,-81,94,-17v0,63,-70,57,-60,131r30,0v-3,-34,13,-54,31,-67"},"@":{"d":"247,-150v0,37,-18,74,-50,82v-14,0,-7,-20,-5,-29r30,-102r-22,0r-8,22v-6,-19,-20,-29,-41,-29v-56,0,-84,47,-84,102v0,34,19,55,51,57v20,1,34,-15,46,-24v0,14,10,23,23,23v51,0,84,-47,84,-104v0,-70,-50,-111,-122,-111v-81,0,-128,54,-134,133v-10,136,188,181,248,73r-23,0v-29,47,-128,58,-167,10v-16,-20,-34,-45,-33,-81v3,-68,42,-115,109,-115v59,0,98,36,98,93xm94,-107v2,-38,21,-70,57,-75v18,2,29,15,29,34v0,36,-19,72,-55,76v-18,1,-32,-16,-31,-35","w":288},"A":{"d":"72,-106r45,-120r42,120r-87,0xm98,-257r-100,257r35,0r29,-77r108,0r28,77r38,0r-100,-257r-38,0","w":233,"k":{"y":6,"w":6,"v":6,"Y":27,"W":9,"V":17,"T":33}},"B":{"d":"185,-188v0,56,-71,38,-123,41r0,-81v52,4,123,-16,123,40xm220,-194v0,-84,-109,-60,-192,-63r0,257r124,0v84,10,107,-123,29,-136v22,-9,39,-28,39,-58xm196,-75v0,61,-76,44,-134,46r0,-89v56,3,134,-16,134,43","w":246},"C":{"d":"137,-234v39,0,65,21,72,54r34,0v-9,-53,-46,-83,-106,-83v-82,0,-122,55,-122,135v0,79,38,133,119,134v68,0,106,-41,112,-103r-35,0v-4,45,-27,74,-74,74v-62,0,-87,-45,-87,-107v0,-59,25,-104,87,-104","w":259},"D":{"d":"206,-130v3,86,-54,109,-144,101r0,-199r58,0v63,-2,85,38,86,98xm240,-135v0,-82,-43,-122,-124,-122r-88,0r0,257r88,0v86,0,125,-48,124,-135","w":253},"E":{"d":"28,-257r0,257r179,0r0,-29r-145,0r0,-89r134,0r0,-29r-134,0r0,-81r144,0r0,-29r-178,0","w":219},"F":{"d":"28,-257r0,257r34,0r0,-118r118,0r0,-29r-118,0r0,-81r135,0r0,-29r-169,0","w":206,"k":{"A":20,".":57,",":57}},"G":{"d":"138,6v35,0,66,-15,82,-38r9,32r22,0r0,-135r-113,0r0,28r82,0v0,54,-29,84,-82,84v-59,0,-88,-43,-88,-102v0,-62,25,-109,88,-109v43,0,69,19,76,56r34,0v-8,-56,-48,-85,-110,-85v-83,0,-123,58,-123,140v0,76,45,129,123,129","w":273},"H":{"d":"28,-257r0,257r34,0r0,-118r136,0r0,118r34,0r0,-257r-34,0r0,110r-136,0r0,-110r-34,0","w":259},"I":{"d":"30,-257r0,257r34,0r0,-257r-34,0","w":93},"J":{"d":"83,6v48,0,76,-25,76,-70r0,-193r-34,0r0,188v-1,29,-10,46,-41,46v-37,0,-43,-26,-42,-62r-34,0v-4,58,21,92,75,91","w":186},"K":{"d":"28,-257r0,257r34,0r0,-90r43,-40r93,130r43,0r-112,-153r108,-104r-44,0r-131,128r0,-128r-34,0","w":240},"L":{"d":"28,-257r0,257r170,0r0,-29r-136,0r0,-228r-34,0","k":{"y":13,"Y":40,"W":20,"V":33,"T":33}},"M":{"d":"29,-257r0,257r32,0r1,-214r80,214r29,0r81,-214r0,214r33,0r0,-257r-47,0r-81,216r-81,-216r-47,0","w":313},"N":{"d":"28,-257r0,257r32,0r1,-206r134,206r38,0r0,-257r-33,0r-1,208r-135,-208r-36,0","w":259},"O":{"d":"137,-23v-62,0,-89,-45,-89,-106v0,-60,27,-105,89,-105v61,0,89,45,89,105v0,61,-27,106,-89,106xm137,-263v-80,0,-123,53,-123,134v0,81,42,135,123,135v81,0,123,-55,123,-135v0,-79,-42,-134,-123,-134","w":273},"P":{"d":"185,-181v0,58,-68,46,-123,47r0,-94v55,1,123,-12,123,47xm220,-181v0,-49,-28,-76,-79,-76r-113,0r0,257r34,0r0,-105r79,0v51,0,79,-27,79,-76","w":233,"k":{"A":27,".":64,",":64}},"Q":{"d":"137,-234v94,-4,112,134,59,188r-34,-27r-18,20r28,23v-72,26,-127,-26,-124,-99v2,-60,27,-102,89,-105xm14,-129v-5,104,94,164,184,120r40,31r17,-22r-34,-26v24,-23,39,-59,39,-103v0,-79,-42,-134,-123,-134v-80,0,-119,54,-123,134","w":273},"R":{"d":"227,-190v1,-87,-114,-65,-199,-67r0,257r34,0r0,-110r84,0v56,-2,36,72,52,110r38,0v-27,-32,4,-113,-53,-125v30,-7,44,-31,44,-65xm193,-184v0,60,-74,42,-131,45r0,-89v55,3,131,-16,131,44","w":246,"k":{"Y":13,"W":6,"V":6,"T":6}},"S":{"d":"113,-234v38,0,60,17,64,52r32,0v-2,-56,-39,-75,-95,-81v-90,-9,-129,108,-41,135v42,13,113,7,113,59v0,36,-30,45,-65,46v-44,0,-74,-19,-75,-62r-33,0v1,63,46,84,107,91v93,10,140,-109,48,-142v-39,-14,-113,-6,-113,-54v0,-33,25,-44,58,-44","w":233},"T":{"d":"86,-228r0,228r35,0r0,-228r85,0r0,-29r-205,0r0,29r85,0","w":206,"k":{"y":40,"w":40,"u":33,"s":40,"r":33,"o":40,"e":40,"c":40,"a":40,"A":33,";":40,":":40,".":40,"-":46,",":40}},"U":{"d":"132,6v64,0,101,-33,101,-99r0,-164r-34,0r0,164v0,45,-21,70,-67,70v-47,0,-71,-24,-71,-70r0,-164r-34,0r0,164v-1,67,39,99,105,99","w":259},"V":{"d":"129,0r92,-257r-36,0r-75,223r-73,-223r-37,0r90,257r39,0","w":219,"k":{"y":6,"u":13,"r":13,"o":20,"i":6,"e":20,"a":20,"A":17,";":17,":":17,".":46,"-":20,",":46}},"W":{"d":"260,0r69,-257r-34,0r-53,214r-57,-214r-37,0r-58,214r-51,-214r-35,0r66,257r36,0r60,-216r59,216r35,0","w":333,"k":{"u":6,"r":6,"o":21,"e":21,"a":13,"A":9,";":6,":":6,".":27,",":27}},"X":{"d":"89,-132r-89,132r38,0r71,-106r70,106r41,0r-90,-132r85,-125r-38,0r-67,100r-64,-100r-41,0","w":219},"Y":{"d":"134,-105r99,-152r-39,0r-76,122r-77,-122r-40,0r99,152r0,105r34,0r0,-105","w":233,"k":{"v":20,"u":27,"q":33,"p":27,"o":40,"i":13,"e":40,"a":33,"A":27,";":33,":":33,".":50,"-":40,",":50}},"Z":{"d":"8,-29r0,29r204,0r0,-29r-163,0r159,-199r0,-29r-188,0r0,29r148,0","w":219},"[":{"d":"93,-239r0,-24r-67,0r0,334r67,0r0,-25r-38,0r0,-285r38,0","w":93},"\\":{"d":"126,6r-106,-269r-26,0r106,269r26,0","w":119},"]":{"d":"0,46r0,25r67,0r0,-334r-67,0r0,24r39,0r0,285r-39,0","w":93},"^":{"d":"96,-251r-78,156r26,0r64,-130r65,130r25,0r-78,-156r-24,0","w":216},"_":{"d":"0,27r0,18r180,0r0,-18r-180,0","w":180},"`":{"d":"-8,-263r47,51r23,0r-31,-51r-39,0","w":79},"a":{"d":"140,-24v-4,28,29,33,48,23r0,-23v-16,4,-19,-3,-19,-20r0,-95v5,-71,-122,-63,-142,-18v-4,8,-7,17,-7,29r31,0v1,-27,20,-35,46,-35v36,-8,61,41,23,51v-46,12,-107,5,-107,64v0,66,101,63,127,24xm81,-23v-38,0,-47,-42,-17,-55v21,-9,55,-6,74,-18v5,48,-12,73,-57,73","w":193},"b":{"d":"115,-190v-27,0,-51,10,-60,29r0,-96r-31,0r0,257r31,0r0,-25v12,18,32,29,61,29v57,-2,85,-41,85,-97v0,-56,-28,-96,-86,-97xm111,-163v40,0,57,29,57,68v0,40,-14,72,-56,72v-41,-1,-58,-29,-58,-70v0,-40,17,-70,57,-70","w":213},"c":{"d":"103,-163v27,0,42,13,46,37r32,0v-6,-42,-32,-65,-80,-64v-60,1,-88,40,-88,99v0,58,28,95,87,95v49,0,76,-28,82,-72r-31,0v-4,27,-21,45,-51,45v-40,0,-55,-30,-55,-68v0,-41,16,-71,58,-72","w":193},"d":{"d":"103,-23v-41,1,-58,-30,-58,-68v0,-40,15,-71,56,-72v42,0,59,29,59,70v0,40,-17,69,-57,70xm99,4v28,1,49,-12,60,-29r0,25r30,0r0,-257r-30,0r-1,96v-11,-19,-32,-29,-60,-29v-58,1,-85,39,-85,96v0,58,28,96,86,98","w":213},"e":{"d":"45,-111v-3,-56,85,-70,102,-20v3,6,5,13,5,20r-107,0xm13,-94v-11,106,149,137,169,35r-30,0v-4,40,-70,47,-93,18v-9,-11,-14,-24,-14,-43r140,0v0,-60,-24,-106,-85,-106v-56,0,-81,40,-87,96","w":193},"f":{"d":"107,-257v-49,-13,-80,14,-71,71r-32,0r0,27r32,0r0,159r30,0r0,-159r36,0r0,-27r-36,0v-5,-34,6,-57,41,-44r0,-27","w":106,"k":{"f":6}},"g":{"d":"97,75v124,7,79,-153,87,-261r-29,0v-1,8,2,21,-1,27v-10,-19,-28,-31,-55,-31v-59,1,-86,41,-86,98v0,56,28,94,83,94v28,0,49,-14,59,-34v2,48,-10,83,-56,83v-23,0,-46,-7,-48,-30r-31,0v3,39,37,52,77,54xm153,-97v0,40,-14,72,-55,72v-40,0,-53,-33,-53,-71v0,-38,15,-67,55,-67v39,0,53,30,53,66","w":206},"h":{"d":"113,-190v-29,0,-49,11,-59,31r0,-98r-31,0r0,257r31,0v4,-69,-21,-167,55,-163v64,3,30,104,38,163r30,0v-5,-80,26,-190,-64,-190"},"i":{"d":"55,-220r0,-37r-30,0r0,37r30,0xm25,-186r0,186r30,0r0,-186r-30,0","w":79},"j":{"d":"55,-220r0,-37r-30,0r0,37r30,0xm-5,69v35,8,60,-9,60,-46r0,-209r-30,0r0,204v1,22,-9,29,-30,25r0,26","w":79},"k":{"d":"25,-257r0,257r30,0r0,-71r29,-26r64,97r39,0r-79,-118r73,-68r-41,0r-85,81r0,-152r-30,0","w":186},"l":{"d":"25,-257r0,257r30,0r0,-257r-30,0","w":79},"m":{"d":"284,-136v7,-68,-100,-67,-120,-23v-15,-45,-90,-37,-112,0r0,-27r-29,0r0,186r31,0v5,-66,-22,-163,49,-163v26,0,35,14,35,41r0,122r31,0v5,-65,-23,-163,48,-163v26,0,36,14,36,41r0,122r31,0r0,-136","w":307},"n":{"d":"177,0v-5,-80,26,-190,-64,-190v-29,0,-46,12,-61,33r0,-29r-29,0r0,186r31,0v4,-69,-21,-167,55,-163v64,3,30,104,38,163r30,0"},"o":{"d":"103,-23v-40,0,-58,-30,-58,-70v0,-40,18,-70,58,-70v40,0,58,29,58,70v0,41,-18,70,-58,70xm103,-190v-60,0,-90,39,-90,97v0,58,30,97,90,97v60,0,91,-38,91,-97v0,-59,-31,-97,-91,-97","w":206},"p":{"d":"115,-190v-27,0,-51,10,-60,29r0,-25r-31,0r0,257r31,0r0,-96v12,18,32,29,61,29v57,-2,85,-41,85,-97v0,-56,-28,-96,-86,-97xm111,-163v40,0,57,29,57,68v0,40,-14,72,-56,72v-41,-1,-58,-29,-58,-70v0,-40,17,-70,57,-70","w":213},"q":{"d":"103,-23v-41,1,-58,-30,-58,-68v0,-40,15,-71,56,-72v42,0,59,29,59,70v0,40,-17,69,-57,70xm99,4v28,1,49,-12,60,-29r0,96r30,0r0,-257r-30,0v-1,8,2,19,-1,25v-11,-19,-32,-29,-60,-29v-58,1,-85,39,-85,96v0,58,28,96,86,98","w":213},"r":{"d":"120,-190v-38,0,-55,16,-69,43r0,-39r-29,0r0,186r31,0v0,-76,-13,-163,67,-158r0,-32","w":119,"k":{"q":6,"o":6,"n":-6,"g":10,"e":6,"d":6,"c":6,".":33,"-":20,",":33}},"s":{"d":"137,-50v-5,42,-100,36,-95,-9r-31,0v2,45,34,58,79,63v71,8,112,-79,41,-105v-29,-10,-75,-6,-83,-39v0,-20,19,-23,39,-23v24,0,42,8,43,31r31,0v-3,-42,-30,-58,-76,-58v-63,0,-97,71,-38,96v30,13,84,7,90,44","w":180},"t":{"d":"103,-27v-19,-1,-41,4,-37,-17r0,-115r37,0r0,-27r-37,0r0,-56r-31,0r0,56r-32,0r0,27r32,0r0,118v-4,42,28,42,68,41r0,-27","w":113},"u":{"d":"23,-64v-13,77,102,88,125,34r0,30r29,0r0,-186r-30,0v-4,70,20,163,-56,163v-23,0,-37,-14,-37,-37r0,-126r-31,0r0,122"},"v":{"d":"107,0r68,-186r-32,0r-52,155r-52,-155r-34,0r69,186r33,0","w":180,"k":{".":27,",":27}},"w":{"d":"207,0r60,-186r-32,0r-42,152r-39,-152r-34,0r-38,152r-42,-152r-34,0r60,186r33,0r38,-148r38,148r32,0","w":272,"k":{".":20,",":20}},"x":{"d":"73,-98r-70,98r37,0r52,-77r52,77r39,0r-72,-100r64,-86r-36,0r-47,65r-44,-65r-40,0","w":186},"y":{"d":"64,30v-4,16,-26,21,-43,13v-1,18,-4,33,21,31v35,-3,44,-23,54,-50r81,-210r-32,0r-53,152r-55,-152r-34,0r74,185","w":180,"k":{".":27,",":27}},"z":{"d":"8,-23r0,23r157,0r0,-27r-119,0r114,-138r0,-21r-145,0r0,27r105,0","w":172},"{":{"d":"45,-95v57,-17,7,-127,48,-147r18,0r0,-21v-69,-12,-67,49,-64,113v0,23,-10,40,-30,42r0,24v72,8,-24,173,94,155r0,-22v-75,15,2,-128,-66,-144","w":119},"|":{"d":"28,-283r0,360r24,0r0,-360r-24,0","w":79},"}":{"d":"44,18v1,23,-8,36,-35,31r0,22v69,11,67,-48,64,-112v0,-23,10,-40,30,-43r0,-24v-73,-8,25,-173,-94,-155r0,21v74,-12,-1,128,66,147v-38,9,-31,66,-31,113","w":119},"~":{"d":"68,-92v43,10,96,50,123,-5r-13,-18v-7,12,-14,26,-31,28v-35,-14,-102,-49,-122,5r13,18v5,-13,13,-27,30,-28","w":216},"\u00a0":{"w":100}}}));

	// Get the <div> we're working on:
	var r = Raphael("holder");
	var usableScreenWidth = r.width - 340;
	var usableScreenHeight = r.height - 340;
	
    var isDrag = false;
	var siteCloud = false;

//================= temp
	// Read the list of sites from the server:
	var sitesListFromTheServer = new Array();
	sitesListFromTheServer[0] = {"id": 100, "name": "Site A" };
	sitesListFromTheServer[1] = {"id": 101, "name": "Site B" };
	sitesListFromTheServer[2] = {"id": 102, "name": "Site C" };
	sitesListFromTheServer[3] = {"id": 103, "name": "Site D" };
	sitesListFromTheServer[4] = {"id": 104, "name": "Site E" };
		
	// Read the neighbouring relationships from the server:
	var neighboursListFromTheServer = new Array();
	neighboursListFromTheServer[0] = [100, 101];
	neighboursListFromTheServer[1] = [101, 102];
	neighboursListFromTheServer[2] = [101, 104];
	neighboursListFromTheServer[3] = [102, 103];
	neighboursListFromTheServer[4] = [103, 104];
	neighboursListFromTheServer[5] = [103, 101];
//================= /temp

	// -------------------------------------	
	// Function for managin the dragging of sites:
	var dragger = function(e) {
		this.dx = e.clientX;
        this.dy = e.clientY;
        isDrag = this;
		this.animate({"fill": "#AED136", "fill-opacity": 0.9, "stroke-width": 3}, 100);
        e.preventDefault && e.preventDefault();
    };

	// -------------------------------------
	// Function to "explode" a site:
	var siteCloudShow = function(e) {
		// Retrieve from the server the list of devices at this site (this.siteID):
//================= temp
		devicesListFromTheServer = new Array();
		devicesListFromTheServer[0] = {"name": "Strong-AP1" };
		devicesListFromTheServer[1] = {"name": "Router 3600C" };
		devicesListFromTheServer[2] = {"name": "Cool UPS" };	
		devicesListFromTheServer[3] = {"name": "Wimax BS5.7" };	
		devicesListFromTheServer[4] = {"name": "Strong-AP2" };	
//================= /temp
		
		// these are the coordinates of the site center:
		centerX = this.getBBox().x + 45;
		centerY = this.getBBox().y + 15;
		
		// hide other clouds, if existing:
		siteCloudHide();
		
		// draws the cloud. Animation is r:0,opacity:0 -> r:150,opacity:1
		siteCloud = r.circle(centerX, centerY, 0 );
		siteCloud.attr({fill: "r#fff-#AED136", "opacity": 0, "stroke": "#336600", "stroke-width": 2, "stroke-dasharray": "-"});
		siteCloud.animate({"r": 150, "opacity": 1}, 700, ">");
		
		// draws the various devices that are in the cloud:
		siteCloud.device = new Array();
		var angle = 0;
		for (var i = 0; i < devicesListFromTheServer.length; i++) {
			
			// Auto placement:
			var deltaX = Math.sin(angle * Math.PI/180) * 95;
			var deltaY = Math.cos(angle * Math.PI/180) * 100;
			angle += 360 / devicesListFromTheServer.length;				
			
			siteCloud.device[i] = r.set();
			siteCloud.device[i].deviceRect = r.rect( centerX+deltaX-45, centerY+deltaY-15, 90, 30, 2 );
			siteCloud.device[i].deviceRect.attr({fill: "#fff", "opacity": 0, stroke: "#333300", "stroke-width": 2});
			siteCloud.device[i].deviceRect.animate({"fill-opacity":0.7, "opacity": 1}, 800, ">");
			siteCloud.device[i].deviceRect.click(siteCloudHide);
					
			siteCloud.device[i].deviceLabel = r.print( centerX+deltaX-35, centerY+deltaY, devicesListFromTheServer[i]["name"], r.getFont("HelveticaNeue"), 12);
			siteCloud.device[i].deviceLabel.attr({"opacity":0});
			siteCloud.device[i].deviceLabel.animate({"opacity":1}, 800, ">");
		
		}
		
		// we hide the cloud on click:
		siteCloud.click(siteCloudHide);
	};
	
	// -------------------------------------
	// Function to hide a siteCloud and its content:
	var siteCloudHide = function(e) {
		if(siteCloud) {
			for(var i = 0; i < siteCloud.device.length; i++) {
				siteCloud.device[i].deviceRect.hide();
				siteCloud.device[i].deviceLabel.hide();
			}
			siteCloud.hide();
			siteCloud = false;
		}
	}

	// -------------------------------------
	// Function that handles the dragging event:
    document.onmousemove = function (e) {
        e = e || window.event;
        if (isDrag) {
            isDrag.translate(e.clientX - isDrag.dx, e.clientY - isDrag.dy);
            isDrag.siteLabel.translate(e.clientX - isDrag.dx, e.clientY - isDrag.dy);
            for (var i = connections.length; i--;) {
                r.connection(connections[i]);
            }
            r.safari();
            isDrag.dx = e.clientX;
            isDrag.dy = e.clientY;
        }
    };

	// -------------------------------------
	// Function for the end of dragging event:
    document.onmouseup = function () {
        isDrag && isDrag.animate({"fill": "#AED136", "fill-opacity": 0.3, "stroke-width": 2}, 100);
        isDrag = false;
    };

	// -------------------------------------
	// Draws the sites:
	var angle = 0;
	var sites = new Array();
	
	for (var i = 0; i < sitesListFromTheServer.length; i++) {
		var siteID = sitesListFromTheServer[i]["id"];
		var siteName = sitesListFromTheServer[i]["name"];
				
		// Auto placement:
		var siteX = Math.sin(angle * Math.PI/180)*(usableScreenWidth/2) + (usableScreenWidth/2 + 170);
		var siteY = Math.cos(angle * Math.PI/180)*(usableScreenHeight/2) + (usableScreenHeight/2 + 170);
		angle += 360 / sitesListFromTheServer.length;		
		
		// Draw the sites:
		sites[siteID] = r.rect(siteX-45, siteY-15, 90, 30, 5);
        sites[siteID].attr({fill: "#AED136", stroke: "#000", "fill-opacity": 0.3, "stroke-width": 2});
		sites[siteID].cursor = "move";
		sites[siteID].siteLabel = r.print( siteX-35, siteY, siteName, r.getFont("HelveticaNeue"), 12);
		
		// records the details in internal variables:
		sites[siteID].siteID = siteID;
		sites[siteID].siteName = siteName;

		// Register the function for the dragging:
        sites[siteID].mousedown(dragger);
		
		// Register the function for doubleclick:
		sites[siteID].dblclick(siteCloudShow);
    }

	// -------------------------------------
	// Creates the connections between the nodes:
	var connections = new Array();
	for (var i = 0; i < neighboursListFromTheServer.length; i++) {
    	connections.push(r.connection( sites[neighboursListFromTheServer[i][0]] , sites[neighboursListFromTheServer[i][1]] , "#000"));
	}

};



// Extension to manage the connection between the nodes:
Raphael.fn.connection = function (obj1, obj2, line, bg) {
    if (obj1.line && obj1.from && obj1.to) {
        line = obj1;
        obj1 = line.from;
        obj2 = line.to;
    }
    var bb1 = obj1.getBBox();
    var bb2 = obj2.getBBox();
    var p = [{x: bb1.x + bb1.width / 2, y: bb1.y - 1},
        {x: bb1.x + bb1.width / 2, y: bb1.y + bb1.height + 1},
        {x: bb1.x - 1, y: bb1.y + bb1.height / 2},
        {x: bb1.x + bb1.width + 1, y: bb1.y + bb1.height / 2},
        {x: bb2.x + bb2.width / 2, y: bb2.y - 1},
        {x: bb2.x + bb2.width / 2, y: bb2.y + bb2.height + 1},
        {x: bb2.x - 1, y: bb2.y + bb2.height / 2},
        {x: bb2.x + bb2.width + 1, y: bb2.y + bb2.height / 2}];
    var d = {}, dis = [];
    for (var i = 0; i < 4; i++) {
        for (var j = 4; j < 8; j++) {
            var dx = Math.abs(p[i].x - p[j].x),
                dy = Math.abs(p[i].y - p[j].y);
            if ((i == j - 4) || (((i != 3 && j != 6) || p[i].x < p[j].x) && ((i != 2 && j != 7) || p[i].x > p[j].x) && ((i != 0 && j != 5) || p[i].y > p[j].y) && ((i != 1 && j != 4) || p[i].y < p[j].y))) {
                dis.push(dx + dy);
                d[dis[dis.length - 1]] = [i, j];
            }
        }
    }
    if (dis.length == 0) {
        var res = [0, 4];
    } else {
        var res = d[Math.min.apply(Math, dis)];
    }
    var x1 = p[res[0]].x,
        y1 = p[res[0]].y,
        x4 = p[res[1]].x,
        y4 = p[res[1]].y,
        dx = Math.max(Math.abs(x1 - x4) / 2, 10),
        dy = Math.max(Math.abs(y1 - y4) / 2, 10),
        x2 = [x1, x1, x1 - dx, x1 + dx][res[0]].toFixed(3),
        y2 = [y1 - dy, y1 + dy, y1, y1][res[0]].toFixed(3),
        x3 = [0, 0, 0, 0, x4, x4, x4 - dx, x4 + dx][res[1]].toFixed(3),
        y3 = [0, 0, 0, 0, y1 + dy, y1 - dy, y4, y4][res[1]].toFixed(3);
    var path = ["M", x1.toFixed(3), y1.toFixed(3), "C", x2, y2, x3, y3, x4.toFixed(3), y4.toFixed(3)].join(",");
    if (line && line.line) {
        line.bg && line.bg.attr({path: path});
        line.line.attr({path: path});
    } else {
        var color = typeof line == "string" ? line : "#000";
        return {
            bg: bg && bg.split && this.path(path).attr({stroke: bg.split("|")[0], fill: "none", "stroke-width": bg.split("|")[1] || 3}),
            line: this.path(path).attr({stroke: color, fill: "none", "stroke-dasharray": ". "}),
            from: obj1,
            to: obj2
        };
    }
};
